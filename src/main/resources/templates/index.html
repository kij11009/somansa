<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K8s Doctor - Kubernetes Diagnostics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <link th:href="@{/css/k8s-doctor.css}" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/"><i class="bi bi-heart-pulse me-2"></i>K8s Doctor</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link active" href="/"><i class="bi bi-house me-1"></i>Home</a>
                <a class="nav-link" th:href="@{/clusters}"><i class="bi bi-hdd-network me-1"></i>Clusters</a>
            </div>
        </div>
    </nav>

    <div class="container py-5">
        <!-- Hero Section -->
        <div class="home-hero">
            <div class="hero-icon">
                <i class="bi bi-heart-pulse"></i>
            </div>
            <h1>K8s Doctor</h1>
            <p class="lead">AI-powered Kubernetes Diagnostics & Troubleshooting</p>
        </div>

        <!-- Cluster Stats -->
        <div class="home-stats text-center">
            <div class="stat-number" th:text="${totalClusters} ?: 0">0</div>
            <div class="stat-text">Registered Clusters</div>
        </div>

        <!-- Action Buttons -->
        <div class="row justify-content-center g-3 mt-4">
            <div class="col-md-4">
                <a th:href="@{/clusters}" class="action-btn btn btn-primary btn-lg w-100">
                    <i class="bi bi-hdd-network"></i>
                    <span>Manage Clusters</span>
                </a>
            </div>
            <div class="col-md-4">
                <a th:href="@{/clusters/new}" class="action-btn btn btn-success btn-lg w-100">
                    <i class="bi bi-plus-circle"></i>
                    <span>Register Cluster</span>
                </a>
            </div>
        </div>

        <!-- No Clusters Message -->
        <div th:if="${clusters == null or clusters.empty}" class="card mt-5">
            <div class="card-body empty-state">
                <div class="empty-icon">
                    <i class="bi bi-hdd-network"></i>
                </div>
                <h5>No Clusters Registered</h5>
                <p>Get started by adding your first Kubernetes cluster</p>
                <a th:href="@{/clusters/new}" class="btn btn-primary">
                    <i class="bi bi-plus-circle me-1"></i>Add Your First Cluster
                </a>
            </div>
        </div>

        <!-- Quick Access to Clusters -->
        <div th:if="${clusters != null and !clusters.empty}" class="mt-5">
            <h5 class="mb-3"><i class="bi bi-lightning-charge me-2"></i>Quick Access</h5>
            <div class="row g-3">
                <div th:each="cluster : ${clusters}" class="col-md-4">
                    <a th:href="@{/clusters/{id}(id=${cluster.id})}" class="card text-decoration-none h-100" style="transition: all 0.2s;">
                        <div class="card-body d-flex align-items-center gap-3">
                            <div class="rounded-circle d-flex align-items-center justify-content-center"
                                 th:style="${cluster.status.name() == 'CONNECTED'} ? 'width:48px;height:48px;background:linear-gradient(135deg, #198754, #20c997);' : 'width:48px;height:48px;background:linear-gradient(135deg, #dc3545, #fd7e14);'">
                                <i class="bi bi-hdd-network text-white" style="font-size:1.25rem;"></i>
                            </div>
                            <div class="flex-grow-1">
                                <div class="fw-semibold text-dark" th:text="${cluster.name}">Cluster</div>
                                <small class="text-muted" th:text="${cluster.nodeCount} + ' nodes, ' + ${cluster.podCount} + ' pods'">0 nodes, 0 pods</small>
                            </div>
                            <span class="badge" th:classappend="${cluster.status.name() == 'CONNECTED'} ? 'bg-success' : 'bg-danger'" th:text="${cluster.status}">STATUS</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
